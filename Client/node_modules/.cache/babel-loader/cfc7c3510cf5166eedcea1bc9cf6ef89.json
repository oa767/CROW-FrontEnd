{"ast":null,"code":"import _slicedToArray from\"/Users/randy/CROW-FrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import RoomItem from'../../components/RoomItem/RoomItem';import'./rooms.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Rooms(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),refresh=_useState6[0],setRefresh=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isModalOpen=_useState8[0],setIsModalOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isDeleteOpen=_useState10[0],setIsDeleteOpen=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),newRoomName=_useState12[0],setNewRoomName=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),roomToDelete=_useState14[0],setRoomToDelete=_useState14[1];var history=useHistory();useEffect(function(){axios.get('https://crow249.herokuapp.com/rooms/list').then(function(response){console.log(response.data);if(response.data){setRooms(response.data);}}).catch(function(error){console.log(error);setError(error);});},[refresh]);var handleCreateRoom=function handleCreateRoom(){axios.post(\"https://crow249.herokuapp.com/rooms/create/\".concat(newRoomName)).then(function(){setIsModalOpen(false);setRefresh(refresh+1);}).catch(function(error){setError(error);console.log(error);});};var handleDeleteRoom=function handleDeleteRoom(){axios.post(\"https://crow249.herokuapp.com/rooms/delete/\".concat(roomToDelete)).then(function(){setIsDeleteOpen(false);setRefresh(refresh+1);}).catch(function(error){setError(error);console.log(error);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rooms\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return history.push('/');},className:\"button\",children:[\"<--\",\"Go Back Home\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"rooms-error-box\",children:/*#__PURE__*/_jsx(\"p\",{children:error.toString()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms-list\",children:[isModalOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-modal\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"room-input\",placeholder:\"Room Name\",value:newRoomName,onChange:function onChange(e){return setNewRoomName(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleCreateRoom,children:\"Create New Room\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return setIsModalOpen(false);},children:\" Cancel \"})]})]}),isDeleteOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"create-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"create-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleDeleteRoom,children:\" Delete Room \"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return setIsDeleteOpen(false);},children:\" Cancel \"})]})}),rooms?rooms.map(function(room,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"room-item\",onClick:function onClick(){setRoomToDelete(room.room_name);setIsDeleteOpen(true);},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" \",room.room_name,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",room.num_users,\" \"]})]},\"\".concat(room.room_name,\"-\").concat(index));}):/*#__PURE__*/_jsx(\"div\",{className:\"rooms-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Sorry there are no rooms right now... Come back later \"})})]}),/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:\"125px\",width:\"300px\",alignItems:\"center\",margin:\"auto\",paddingTop:\"20px\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"page-button\",onClick:function onClick(){return setIsModalOpen(true);},children:\" Add New Room \"})})]});}","map":{"version":3,"sources":["/Users/randy/CROW-FrontEnd/src/pages/Rooms/Rooms.jsx"],"names":["React","useEffect","useState","axios","useHistory","RoomItem","Rooms","undefined","rooms","setRooms","error","setError","refresh","setRefresh","isModalOpen","setIsModalOpen","isDeleteOpen","setIsDeleteOpen","newRoomName","setNewRoomName","roomToDelete","setRoomToDelete","history","get","then","response","console","log","data","catch","handleCreateRoom","post","handleDeleteRoom","push","toString","e","target","value","map","room","index","room_name","num_users","paddingBottom","width","alignItems","margin","paddingTop"],"mappings":"gHAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,oCAArB,CAEA,MAAO,aAAP,C,6IAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAC9B,cAA0BJ,QAAQ,CAACK,SAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eACA,eAA0BP,QAAQ,CAACK,SAAD,CAAlC,yCAAOG,KAAP,eAAcC,QAAd,eAEA,eAA8BT,QAAQ,CAACK,SAAD,CAAtC,yCAAOK,OAAP,eAAgBC,UAAhB,eAEA,eAAsCX,QAAQ,CAAC,KAAD,CAA9C,yCAAOY,WAAP,eAAoBC,cAApB,eACA,eAAwCb,QAAQ,CAAC,KAAD,CAAhD,0CAAOc,YAAP,gBAAqBC,eAArB,gBACA,gBAAsCf,QAAQ,CAAC,EAAD,CAA9C,2CAAOgB,WAAP,gBAAoBC,cAApB,gBACA,gBAAwCjB,QAAQ,CAAC,EAAD,CAAhD,2CAAOkB,YAAP,gBAAqBC,eAArB,gBAEA,GAAMC,CAAAA,OAAO,CAAGlB,UAAU,EAA1B,CAEAH,SAAS,CAAC,UAAM,CACdE,KAAK,CAACoB,GAAN,CAAU,0CAAV,EACGC,IADH,CACQ,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACA,GAAIH,QAAQ,CAACG,IAAb,CAAkB,CAChBnB,QAAQ,CAACgB,QAAQ,CAACG,IAAV,CAAR,CACD,CACF,CANH,EAOGC,KAPH,CAOS,SAAAnB,KAAK,CAAI,CACdgB,OAAO,CAACC,GAAR,CAAYjB,KAAZ,EACAC,QAAQ,CAACD,KAAD,CAAR,CACD,CAVH,EAWD,CAZQ,CAYN,CAACE,OAAD,CAZM,CAAT,CAcA,GAAMkB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B3B,KAAK,CAAC4B,IAAN,sDAAyDb,WAAzD,GACGM,IADH,CACQ,UAAM,CACVT,cAAc,CAAC,KAAD,CAAd,CACAF,UAAU,CAACD,OAAO,CAAG,CAAX,CAAV,CACD,CAJH,EAKGiB,KALH,CAKS,SAAAnB,KAAK,CAAI,CACdC,QAAQ,CAACD,KAAD,CAAR,CACAgB,OAAO,CAACC,GAAR,CAAYjB,KAAZ,EACD,CARH,EASD,CAVD,CAYA,GAAMsB,CAAAA,gBAAgB,CAAE,QAAlBA,CAAAA,gBAAkB,EAAM,CAC5B7B,KAAK,CAAC4B,IAAN,sDAAyDX,YAAzD,GACGI,IADH,CACQ,UAAM,CACVP,eAAe,CAAC,KAAD,CAAf,CACAJ,UAAU,CAACD,OAAO,CAAG,CAAX,CAAV,CACD,CAJH,EAKGiB,KALH,CAKS,SAAAnB,KAAK,CAAI,CACdC,QAAQ,CAACD,KAAD,CAAR,CACAgB,OAAO,CAACC,GAAR,CAAYjB,KAAZ,EACD,CARH,EASD,CAVD,CAYA,mBACI,wCACE,aAAK,SAAS,CAAC,cAAf,wBACE,6BADF,cAEE,gBACE,OAAO,CAAE,yBAAMY,CAAAA,OAAO,CAACW,IAAR,CAAa,GAAb,CAAN,EADX,CAEE,SAAS,CAAC,QAFZ,WAIG,KAJH,kBAFF,GADF,CAWGvB,KAAK,eACJ,YAAK,SAAS,CAAC,iBAAf,uBACE,mBAAIA,KAAK,CAACwB,QAAN,EAAJ,EADF,EAZJ,cAiBE,aAAK,SAAS,CAAC,YAAf,WACGpB,WAAW,eACV,aAAK,SAAS,CAAC,cAAf,wBACE,cACE,SAAS,CAAC,YADZ,CAEE,WAAW,CAAC,WAFd,CAGE,KAAK,CAAEI,WAHT,CAIE,QAAQ,CAAE,kBAACiB,CAAD,QAAOhB,CAAAA,cAAc,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EAJZ,EADF,cAOE,aAAK,SAAS,CAAC,gBAAf,wBACE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEP,gBAApC,6BADF,cAEE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAE,yBAAMf,CAAAA,cAAc,CAAC,KAAD,CAApB,EAApC,sBAFF,GAPF,GAFJ,CAeGC,YAAY,eACX,YAAK,SAAS,CAAC,cAAf,uBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEgB,gBAApC,2BADF,cAEE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAE,yBAAMf,CAAAA,eAAe,CAAC,KAAD,CAArB,EAApC,sBAFF,GADF,EAhBJ,CAuBGT,KAAK,CAAGA,KAAK,CAAC8B,GAAN,CAAU,SAACC,IAAD,CAAOC,KAAP,qBACxB,aACE,SAAS,CAAC,WADZ,CAGE,OAAO,CAAE,kBAAM,CACNnB,eAAe,CAACkB,IAAI,CAACE,SAAN,CAAf,CACAxB,eAAe,CAAC,IAAD,CAAf,CACD,CANV,wBAQS,yBAAKsB,IAAI,CAACE,SAAV,OART,cASS,yBAAKF,IAAI,CAACG,SAAV,OATT,aAEUH,IAAI,CAACE,SAFf,aAE4BD,KAF5B,EADwB,EAAV,CAAH,cAaJ,YAAK,SAAS,CAAC,aAAf,uBACE,6EADF,EApCJ,GAjBF,cA0DA,YAAK,KAAK,CAAE,CAACG,aAAa,CAAE,OAAhB,CAAyBC,KAAK,CAAE,OAAhC,CAAyCC,UAAU,CAAE,QAArD,CAA+DC,MAAM,CAAE,MAAvE,CAA+EC,UAAU,CAAE,MAA3F,CAAZ,uBACE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAE,yBAAMhC,CAAAA,cAAc,CAAC,IAAD,CAApB,EAAzC,4BADF,EA1DA,GADJ,CAgED","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport {useHistory} from 'react-router-dom';\n\nimport RoomItem from '../../components/RoomItem/RoomItem';\n\nimport './rooms.css';\n\nexport default function Rooms() {\n  const [rooms, setRooms] = useState(undefined);\n  const [error, setError] = useState(undefined);\n\n  const [refresh, setRefresh] = useState(undefined);\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isDeleteOpen, setIsDeleteOpen] = useState(false);\n  const [newRoomName, setNewRoomName] = useState('');\n  const [roomToDelete, setRoomToDelete] = useState('');\n\n  const history = useHistory();\n\n  useEffect(() => {\n    axios.get('https://crow249.herokuapp.com/rooms/list')\n      .then((response) => {\n        console.log(response.data);\n        if (response.data){\n          setRooms(response.data);\n        }\n      })\n      .catch(error => {\n        console.log(error);\n        setError(error);\n      });\n  }, [refresh])\n\n  const handleCreateRoom = () => {\n    axios.post(`https://crow249.herokuapp.com/rooms/create/${newRoomName}`)\n      .then(() => {\n        setIsModalOpen(false);\n        setRefresh(refresh + 1);\n      })\n      .catch(error => {\n        setError(error);\n        console.log(error);\n      })\n  }\n  \n  const handleDeleteRoom= () => {\n    axios.post(`https://crow249.herokuapp.com/rooms/delete/${roomToDelete}`)\n      .then(() => {\n        setIsDeleteOpen(false);\n        setRefresh(refresh + 1);\n      })\n      .catch(error => {\n        setError(error);\n        console.log(error);\n      })\n  }\n\n  return (\n      <>\n        <div className=\"rooms-header\">\n          <h1>Rooms</h1>\n          <button\n            onClick={() => history.push('/')}\n            className=\"button\"\n          >\n            {\"<--\"}Go Back Home\n          </button>\n        </div>\n\n        {error && (\n          <div className=\"rooms-error-box\">\n            <p>{error.toString()}</p>\n          </div>\n        )}\n\n        <div className=\"rooms-list\">\n          {isModalOpen &&\n            <div className=\"create-modal\">\n              <input\n                className=\"room-input\"\n                placeholder=\"Room Name\"\n                value={newRoomName}\n                onChange={(e) => setNewRoomName(e.target.value)}\n              />\n              <div className=\"create-actions\">\n                <button className=\"button\" onClick={handleCreateRoom}>Create New Room</button>\n                <button className=\"button\" onClick={() => setIsModalOpen(false)}> Cancel </button>\n              </div>\n            </div>\n          }\n          {isDeleteOpen &&\n            <div className=\"create-modal\">\n              <div className=\"create-actions\">\n                <button className=\"button\" onClick={handleDeleteRoom}> Delete Room </button>\n                <button className=\"button\" onClick={() => setIsDeleteOpen(false)}> Cancel </button>\n              </div>\n            </div>\n          }\n          {rooms ? rooms.map((room, index) => (\n\t    <div\n\t      className=\"room-item\"\n\t      key={`${room.room_name}-${index}`}\n\t      onClick={() => {\n                setRoomToDelete(room.room_name);\n                setIsDeleteOpen(true);\n              }}          \n\t    > \n              <p> {room.room_name} </p>\n              <p> {room.num_users} </p>\n            </div>\n          )) : (\n            <div className=\"rooms-empty\">\n              <p>Sorry there are no rooms right now... Come back later </p>\n            </div>\n          )}\n      </div>\n      <div style={{paddingBottom: \"125px\", width: \"300px\", alignItems: \"center\", margin: \"auto\", paddingTop: \"20px\"}}>\n        <button className=\"page-button\" onClick={() => setIsModalOpen(true)}> Add New Room </button>\n      </div>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}