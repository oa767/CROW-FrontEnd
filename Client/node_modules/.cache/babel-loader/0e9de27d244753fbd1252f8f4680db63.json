{"ast":null,"code":"import _slicedToArray from\"/Users/randy/CROW-FrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import'./users.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Users(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),refresh=_useState6[0],setRefresh=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isModalOpen=_useState8[0],setIsModalOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isDeleteOpen=_useState10[0],setIsDeleteOpen=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),newUserName=_useState12[0],setNewUserName=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),userToDelete=_useState14[0],setUserToDelete=_useState14[1];var history=useHistory();useEffect(function(){axios.get('https://crow249.herokuapp.com/users/list').then(function(response){if(response.data){setUsers(response.data);}}).catch(function(error){setError(error);console.log(error);});},[refresh]);var handleCreateUser=function handleCreateUser(){axios.post(\"https://crow249.herokuapp.com/users/create/\".concat(newUserName)).then(function(){setIsModalOpen(false);setRefresh(refresh+1);}).catch(function(error){setError(error);console.log(error);});};var handleDeleteUser=function handleDeleteUser(){axios.post(\"https://crow249.herokuapp.com/users/delete/\".concat(userToDelete)).then(function(){setIsDeleteOpen(false);setRefresh(refresh+1);}).catch(function(error){setError(error);console.log(error);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Users\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return history.push('/');},className:\"button\",children:[\"<--\",\"Go Back Home\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"rooms-error-box\",children:/*#__PURE__*/_jsx(\"p\",{children:error.toString()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms-list\",children:[isModalOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-modal\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"user-input\",placeholder:\"User Name\",value:newUserName,onChange:function onChange(e){return setNewUserName(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleCreateUser,children:\"Create New User\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return setIsModalOpen(false);},children:\" Cancel \"})]})]}),isDeleteOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"create-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"create-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleDeleteUser,children:\" Delete User\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return setIsDeleteOpen(false);},children:\" Cancel \"})]})}),users?users.map(function(user,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"user-item\",onClick:function onClick(){setUserToDelete(user.user_name);setIsDeleteOpen(true);},children:[/*#__PURE__*/_jsx(\"p\",{children:user.user_name}),/*#__PURE__*/_jsx(\"p\",{children:index})]},\"\".concat(user.user_name,\"-\").concat(index));}):/*#__PURE__*/_jsx(\"div\",{className:\"rooms-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Sorry there are no rooms right now... Come back later \"})})]}),/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:\"125px\",width:\"300px\",alignItems:\"center\",margin:\"auto\",paddingTop:\"20px\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"page-button\",onClick:function onClick(){return setIsModalOpen(true);},children:\" Add New User \"})})]});}","map":{"version":3,"sources":["/Users/randy/CROW-FrontEnd/src/pages/Users/Users.jsx"],"names":["React","useEffect","useState","axios","useHistory","Users","undefined","users","setUsers","error","setError","refresh","setRefresh","isModalOpen","setIsModalOpen","isDeleteOpen","setIsDeleteOpen","newUserName","setNewUserName","userToDelete","setUserToDelete","history","get","then","response","data","catch","console","log","handleCreateUser","post","handleDeleteUser","push","toString","e","target","value","map","user","index","user_name","paddingBottom","width","alignItems","margin","paddingTop"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport {useHistory} from 'react-router-dom';\n\nimport './users.css';\n\nexport default function Users() {\n  const [users, setUsers] = useState(undefined);\n  const [error, setError] = useState(undefined);\n\n  const [refresh, setRefresh] = useState(0);\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isDeleteOpen, setIsDeleteOpen] = useState(false);\n  const [newUserName, setNewUserName] = useState('');\n  const [userToDelete, setUserToDelete] = useState('');\n\n  const history = useHistory();\n\n  useEffect(() => {\n    axios.get('https://crow249.herokuapp.com/users/list')\n      .then((response) => {\n        if (response.data){\n          setUsers(response.data);\n        }\n      })\n      .catch(error => {\n        setError(error);\n        console.log(error);\n      });\n  }, [refresh])\n\n  const handleCreateUser = () => {\n    axios.post(`https://crow249.herokuapp.com/users/create/${newUserName}`)\n      .then(() => {\n        setIsModalOpen(false);\n        setRefresh(refresh + 1);\n      })\n      .catch(error => {\n        setError(error);\n        console.log(error);\n      })\n  }\n  \n  const handleDeleteUser = () => {\n    axios.post(`https://crow249.herokuapp.com/users/delete/${userToDelete}`)\n      .then(() => {\n        setIsDeleteOpen(false);\n        setRefresh(refresh + 1);\n      })\n      .catch(error => {\n        setError(error);\n        console.log(error);\n      })\n  }\n  \n  return (\n    <>\n      <div className=\"rooms-header\">\n        <h1>Users</h1>\n        <button\n          onClick={() => history.push('/')}\n          className=\"button\"\n        >\n          {\"<--\"}Go Back Home\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"rooms-error-box\">\n          <p>{error.toString()}</p>\n        </div>\n      )}\n\n      <div className=\"rooms-list\">\n\t{isModalOpen &&\n          <div className=\"create-modal\">\n            <input\n              className=\"user-input\"\n              placeholder=\"User Name\"\n              value={newUserName}\n              onChange={(e) => setNewUserName(e.target.value)}\n            />\n            <div className=\"create-actions\">\n              <button className=\"button\" onClick={handleCreateUser}>Create New User</button>\n              <button className=\"button\" onClick={() => setIsModalOpen(false)}> Cancel </button>\n            </div>\n          </div>\n        }\n        {isDeleteOpen &&\n          <div className=\"create-modal\">\n            <div className=\"create-actions\">\n              <button className=\"button\" onClick={handleDeleteUser}> Delete User</button>\n              <button className=\"button\" onClick={() => setIsDeleteOpen(false)}> Cancel </button>\n            </div>\n          </div>\n        }\n\n        {users ? users.map((user, index) => (\n          <div \n            className=\"user-item\"\n            key={`${user.user_name}-${index}`}\n            onClick={() => {\n              setUserToDelete(user.user_name);\n    \t      setIsDeleteOpen(true);\n            }}\n\t  >\n            <p>{user.user_name}</p>\n            <p>{index}</p>\n          </div>\n        )) : (\n          <div className=\"rooms-empty\">\n            <p>Sorry there are no rooms right now... Come back later </p>\n          </div>\n        )}\n      </div>\n      <div style={{paddingBottom: \"125px\", width: \"300px\", alignItems: \"center\", margin: \"auto\", paddingTop: \"20px\"}}>\n        <button className=\"page-button\" onClick={() => setIsModalOpen(true)}> Add New User </button>\n      </div>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}